<!--pages/hostel/index.wxml-->
<view class="hostel-container" wx:if="{{!loading && hostel}}">
  <!-- ç›¸å†Œè½®æ’­ -->
  <view class="album-section">
    <swiper class="album-swiper" indicator-dots="{{hostel.albums.length > 1}}" autoplay circular>
      <swiper-item wx:for="{{hostel.albums}}" wx:key="*this">
        <image
          class="album-image"
          src="{{item}}"
          mode="aspectFill"
          data-url="{{item}}"
          data-urls="{{hostel.albums}}"
          bindtap="previewAlbum"
        ></image>
      </swiper-item>
    </swiper>
    <view class="album-badge">
      <text class="badge-text">{{hostel.albums.length}}å¼ ç…§ç‰‡</text>
    </view>
  </view>

  <!-- æ°‘å®¿ä¿¡æ¯ -->
  <view class="hostel-info card">
    <text class="info-title">{{hostel.name}}</text>
    <text class="info-desc">{{hostel.description}}</text>

    <view class="info-location" bindtap="navigate">
      <text class="location-icon">ğŸ“</text>
      <text class="location-text">{{hostel.address}}</text>
      <text class="location-arrow">â€º</text>
    </view>

    <!-- è”ç³»æ–¹å¼ -->
    <view class="contact-actions">
      <button class="contact-btn" bindtap="makeCall">
        <text class="btn-icon">ğŸ“</text>
        <text class="btn-text">ç”µè¯å’¨è¯¢</text>
      </button>
      <button class="contact-btn" bindtap="copyWechat">
        <text class="btn-icon">ğŸ’¬</text>
        <text class="btn-text">å¾®ä¿¡å’¨è¯¢</text>
      </button>
    </view>
  </view>

  <!-- è®¾æ–½æœåŠ¡ -->
  <view class="facilities-section card" wx:if="{{hostel.facilities && hostel.facilities.length > 0}}">
    <text class="section-title">è®¾æ–½æœåŠ¡</text>
    <view class="facilities-list">
      <view class="facility-item" wx:for="{{hostel.facilities}}" wx:key="*this">
        <text class="facility-icon">âœ“</text>
        <text class="facility-text">{{item}}</text>
      </view>
    </view>
  </view>

  <!-- æˆ¿å‹åˆ—è¡¨ -->
  <view class="rooms-section">
    <text class="section-title">æˆ¿å‹ä»‹ç»</text>

    <view class="room-card" wx:for="{{rooms}}" wx:key="_id" data-room="{{item}}" bindtap="viewRoom">
      <view class="room-images">
        <swiper class="room-swiper" indicator-dots="{{item.images.length > 1}}">
          <swiper-item wx:for="{{item.images}}" wx:key="*this" wx:for-item="img">
            <image class="room-image" src="{{img}}" mode="aspectFill"></image>
          </swiper-item>
        </swiper>
      </view>

      <view class="room-content">
        <text class="room-title">{{item.roomType}}</text>
        <text class="room-desc">{{item.description}}</text>

        <view class="room-info">
          <text class="info-tag">{{item.area}}</text>
          <text class="info-tag">{{item.bedType}}</text>
        </view>

        <view class="room-tags" wx:if="{{item.tags && item.tags.length > 0}}">
          <text class="tag" wx:for="{{item.tags}}" wx:key="*this" wx:for-item="tag">{{tag}}</text>
        </view>

        <view class="room-footer">
          <view class="price-range">
            <text class="price-label">å‚è€ƒä»·</text>
            <text class="price-value">Â¥{{item.price.low}}-{{item.price.high}}</text>
          </view>
          <view class="room-status" wx:if="{{item.status}}">
            <text class="status-dot"></text>
            <text class="status-text">{{item.status}}</text>
          </view>
        </view>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨å’¨è¯¢æŒ‰é’® -->
  <view class="bottom-action">
    <button class="action-btn btn-primary" bindtap="copyWechat">
      <text>ğŸ’¬ ç«‹å³å’¨è¯¢é¢„è®¢</text>
    </button>
  </view>
</view>

<!-- åŠ è½½çŠ¶æ€ -->
<view class="loading-container" wx:if="{{loading}}">
  <text class="loading-text">åŠ è½½ä¸­...</text>
</view>
