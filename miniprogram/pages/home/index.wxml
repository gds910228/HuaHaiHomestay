<!--pages/home/index.wxml-->
<view class="home-container">
  <!-- é¡¶éƒ¨æ¬¢è¿åŒº -->
  <view class="header-banner">
    <view class="banner-content">
      <text class="banner-title">æ¬¢è¿æ¥åˆ°ç”»æµ·æ°‘å®¿</text>
      <text class="banner-subtitle">æ¢ç´¢å—æ¾³å²›ä¹‹ç¾</text>
    </view>
    <view class="banner-wave"></view>
  </view>

  <!-- åˆ†ç±»å¯¼èˆª -->
  <view class="category-scroll">
    <scroll-view scroll-x class="category-list" enable-flex>
      <view
        class="category-item {{currentCategory === item.id ? 'active' : ''}}"
        wx:for="{{categories}}"
        wx:key="id"
        data-category="{{item.id}}"
        bindtap="switchCategory"
      >
        <text class="category-icon">{{item.icon}}</text>
        <text class="category-name">{{item.name}}</text>
      </view>
    </scroll-view>
  </view>

  <!-- æ”»ç•¥å¡ç‰‡åˆ—è¡¨ -->
  <view class="guides-list">
    <view class="empty-state" wx:if="{{!loading && guides.length === 0}}">
      <text class="empty-icon">ğŸŒŠ</text>
      <text class="empty-text">æš‚æ— å†…å®¹</text>
      <text class="empty-hint">ç²¾å½©å†…å®¹å³å°†ä¸Šçº¿</text>
    </view>

    <view
      class="guide-card"
      wx:for="{{guides}}"
      wx:key="_id"
      data-id="{{item._id}}"
      bindtap="viewGuide"
    >
      <!-- å¡ç‰‡å›¾ç‰‡ -->
      <view class="card-image-wrapper">
        <image class="card-image" src="{{item.cover}}" mode="aspectFill"></image>
        <view class="card-category">{{item.categoryName}}</view>
      </view>

      <!-- å¡ç‰‡å†…å®¹ -->
      <view class="card-content">
        <text class="card-title">{{item.title}}</text>
        <text class="card-desc">{{item.summary}}</text>

        <!-- æ ‡ç­¾ -->
        <view class="card-tags" wx:if="{{item.tags && item.tags.length > 0}}">
          <text class="tag" wx:for="{{item.tags}}" wx:key="*this" wx:for-item="tag">{{tag}}</text>
        </view>

        <!-- åº•éƒ¨ä¿¡æ¯ -->
        <view class="card-footer">
          <view class="card-stats">
            <text class="stat-item">ğŸ‘ {{item.views || 0}}</text>
            <text class="stat-item" wx:if="{{item.likes > 0}}">â¤ï¸ {{item.likes || 0}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view class="loading-more" wx:if="{{loading}}">
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>
  </view>
</view>
