<!--pages/init/index.wxml-->
<view class="init-container">
  <!-- 提示卡片 -->
  <view class="tip-card card">
    <text class="tip-title">📝 数据库初始化工具</text>
    <text class="tip-desc">此工具用于初始化小程序的数据库数据。首次使用建议依次执行以下操作：</text>
    <view class="tip-steps">
      <text class="step-item">1. 部署 init-database 云函数</text>
      <text class="step-item">2. 点击"初始化全部数据"按钮</text>
      <text class="step-item">3. 等待执行完成</text>
      <text class="step-item">4. 返回首页查看效果</text>
    </view>
  </view>

  <!-- 操作按钮 -->
  <view class="actions-section">
    <text class="section-title">🚀 初始化操作</text>

    <button
      class="action-btn primary"
      bindtap="initAll"
      disabled="{{loading}}"
    >
      <text>📦 初始化全部数据</text>
    </button>

    <view class="action-row">
      <button
        class="action-btn secondary"
        bindtap="initHostel"
        disabled="{{loading}}"
      >
        <text>🏠 民宿信息</text>
      </button>
      <button
        class="action-btn secondary"
        bindtap="initRooms"
        disabled="{{loading}}"
      >
        <text>🛏️ 房型数据</text>
      </button>
    </view>

    <button
      class="action-btn secondary"
      bindtap="initGuides"
      disabled="{{loading}}"
    >
      <text>📝 攻略数据</text>
    </button>

    <button
      class="action-btn secondary"
      bindtap="initFood"
      disabled="{{loading}}"
    >
      <text>🍴 美食攻略（真实数据）</text>
    </button>

    <view class="action-row">
      <button
        class="action-btn secondary"
        bindtap="goToAdmin"
        disabled="{{loading}}"
      >
        <text>⚙️ 管理后台</text>
      </button>
      <button
        class="action-btn secondary"
        bindtap="goToAdminGuides"
        disabled="{{loading}}"
      >
        <text>📝 编辑攻略</text>
      </button>
    </view>

    <view class="divider"></view>

    <button
      class="action-btn danger"
      bindtap="clearAll"
      disabled="{{loading}}"
    >
      <text>⚠️ 清空所有数据</text>
    </button>

    <button
      class="action-btn"
      bindtap="clearLogs"
      disabled="{{loading}}"
    >
      <text>🗑️ 清空日志</text>
    </button>
  </view>

  <!-- 执行日志 -->
  <view class="logs-section card">
    <view class="logs-header">
      <text class="logs-title">📋 执行日志</text>
      <text class="logs-count">{{logs.length}} 条</text>
    </view>
    <scroll-view class="logs-content" scroll-y scroll-into-view="log-top">
      <text id="log-top"></text>
      <text class="log-item" wx:for="{{logs}}" wx:key="*this">{{item}}</text>
      <text class="log-empty" wx:if="{{logs.length === 0}}">暂无日志</text>
    </scroll-view>
  </view>

  <!-- 底部按钮 -->
  <view class="bottom-actions">
    <button class="home-btn btn-primary" bindtap="goHome">
      <text>🏠 返回首页</text>
    </button>
  </view>
</view>
