<!--pages/admin/hostel/index.wxml-->
<view class="hostel-container">
  <!-- æ ‡ç­¾åˆ‡æ¢ -->
  <view class="tab-bar">
    <view
      class="tab-item {{activeTab === 'hostel' ? 'active' : ''}}"
      data-tab="hostel"
      bindtap="switchTab"
    >
      <text>æ°‘å®¿ä¿¡æ¯</text>
    </view>
    <view
      class="tab-item {{activeTab === 'rooms' ? 'active' : ''}}"
      data-tab="rooms"
      bindtap="switchTab"
    >
      <text>æˆ¿å‹ç®¡ç†</text>
    </view>
  </view>

  <!-- æ°‘å®¿ä¿¡æ¯ -->
  <view class="tab-content" wx:if="{{activeTab === 'hostel'}}">
    <view class="info-card card" wx:if="{{hostel}}">
      <view class="info-header">
        <text class="info-title">{{hostel.name || 'ç”»æµ·æ°‘å®¿'}}</text>
        <button class="edit-btn" size="mini" bindtap="editHostel">ç¼–è¾‘</button>
      </view>

      <view class="info-section">
        <text class="section-label">æ°‘å®¿æè¿°</text>
        <text class="section-value">{{hostel.description || 'æš‚æ— æè¿°'}}</text>
      </view>

      <view class="info-section">
        <text class="section-label">åœ°å€</text>
        <text class="section-value">{{hostel.address || 'æš‚æœªè®¾ç½®'}}</text>
      </view>

      <view class="info-section">
        <text class="section-label">è”ç³»ç”µè¯</text>
        <text class="section-value">{{hostel.phone || 'æš‚æœªè®¾ç½®'}}</text>
      </view>

      <view class="info-section">
        <text class="section-label">å¾®ä¿¡å·</text>
        <text class="section-value">{{hostel.wechat || 'æš‚æœªè®¾ç½®'}}</text>
      </view>

      <view class="info-section">
        <text class="section-label">ç›¸å†Œæ•°é‡</text>
        <text class="section-value">{{hostel.albums ? hostel.albums.length : 0}} å¼ </text>
      </view>

      <view class="info-section">
        <text class="section-label">è®¾æ–½æœåŠ¡</text>
        <view class="facilities-list">
          <text class="facility-tag" wx:for="{{hostel.facilities || []}}" wx:key="*this">{{item}}</text>
          <text class="facility-empty" wx:if="{{!hostel.facilities || hostel.facilities.length === 0}}">æš‚æœªè®¾ç½®</text>
        </view>
      </view>
    </view>

    <view class="empty-state" wx:if="{{!loading && !hostel}}">
      <text class="empty-icon">ğŸ </text>
      <text class="empty-text">æš‚æœªè®¾ç½®æ°‘å®¿ä¿¡æ¯</text>
      <button class="empty-btn btn-primary" bindtap="editHostel">
        <text>ç«‹å³è®¾ç½®</text>
      </button>
    </view>
  </view>

  <!-- æˆ¿å‹ç®¡ç† -->
  <view class="tab-content" wx:if="{{activeTab === 'rooms'}}">
    <view class="rooms-list">
      <view
        class="room-item card"
        wx:for="{{rooms}}"
        wx:key="_id"
      >
        <view class="room-header">
          <text class="room-title">{{item.roomType}}</text>
          <text class="room-price">Â¥{{item.price.low}}-{{item.price.high}}</text>
        </view>

        <view class="room-info">
          <text class="info-text">é¢ç§¯: {{item.area}}</text>
          <text class="info-text">åºŠå‹: {{item.bedType}}</text>
        </view>

        <view class="room-tags" wx:if="{{item.tags && item.tags.length > 0}}">
          <text class="tag" wx:for="{{item.tags}}" wx:key="*this" wx:for-item="tag">{{tag}}</text>
        </view>

        <view class="room-actions">
          <button
            class="action-btn edit"
            size="mini"
            data-index="{{index}}"
            catchtap="editRoom"
          >
            ç¼–è¾‘
          </button>
          <button
            class="action-btn delete"
            size="mini"
            data-index="{{index}}"
            data-room-type="{{item.roomType}}"
            catchtap="deleteRoom"
          >
            åˆ é™¤
          </button>
        </view>
      </view>

      <view class="empty-state" wx:if="{{!loading && rooms.length === 0}}">
        <text class="empty-icon">ğŸ›ï¸</text>
        <text class="empty-text">æš‚æ— æˆ¿å‹</text>
      </view>
    </view>

    <!-- æ·»åŠ æŒ‰é’® -->
    <view class="add-btn" bindtap="addRoom">
      <text class="add-icon">+</text>
    </view>
  </view>
</view>
