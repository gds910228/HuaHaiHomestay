<!--pages/guide-detail/index.wxml-->
<view class="detail-container" wx:if="{{!loading && guide}}">
  <!-- é¡¶éƒ¨å›¾ç‰‡è½®æ’­ -->
  <view class="detail-images">
    <swiper class="images-swiper" indicator-dots="{{guide.images.length > 1}}" autoplay circular>
      <swiper-item wx:for="{{guide.images}}" wx:key="*this">
        <image
          class="detail-image"
          src="{{item}}"
          mode="aspectFill"
          data-url="{{item}}"
          data-urls="{{guide.images}}"
          bindtap="previewImage"
        ></image>
      </swiper-item>
    </swiper>
  </view>

  <!-- å†…å®¹åŒº -->
  <view class="detail-content">
    <!-- æ ‡é¢˜å’Œæ“ä½œ -->
    <view class="detail-header">
      <view class="header-left">
        <text class="detail-category">{{guide.categoryName}}</text>
        <text class="detail-title">{{guide.title}}</text>
      </view>
      <view class="header-actions">
        <view class="action-btn" bindtap="toggleFavorite">
          <text class="action-icon">{{isFavorite ? 'â¤ï¸' : 'ğŸ¤'}}</text>
        </view>
      </view>
    </view>

    <!-- æ ‡ç­¾ -->
    <view class="detail-tags" wx:if="{{guide.tags && guide.tags.length > 0}}">
      <text class="detail-tag" wx:for="{{guide.tags}}" wx:key="*this" wx:for-item="tag">{{tag}}</text>
    </view>

    <!-- ç»Ÿè®¡ä¿¡æ¯ -->
    <view class="detail-stats">
      <text class="stat-item">ğŸ‘ {{guide.views || 0}}</text>
      <text class="stat-item" wx:if="{{guide.likes > 0}}">â¤ï¸ {{guide.likes || 0}}</text>
    </view>

    <!-- åˆ†å‰²çº¿ -->
    <view class="divider"></view>

    <!-- è¯¦ç»†å†…å®¹ -->
    <view class="detail-body">
      <text class="body-title">è¯¦ç»†ä»‹ç»</text>
      <rich-text class="body-content" nodes="{{guide.content}}"></rich-text>
    </view>

    <!-- å®ç”¨ä¿¡æ¯ï¼ˆå¦‚æœæœ‰ï¼‰ -->
    <view class="detail-info" wx:if="{{guide.info}}">
      <text class="body-title">å®ç”¨ä¿¡æ¯</text>
      <view class="info-item" wx:for="{{guide.info}}" wx:key="label">
        <text class="info-label">{{item.label}}</text>
        <text class="info-value">{{item.value}}</text>
      </view>
    </view>
  </view>

  <!-- åº•éƒ¨æ“ä½œæ  -->
  <view class="detail-footer">
    <button class="footer-btn btn-secondary" open-type="share">
      <text>ğŸ“¤ åˆ†äº«</text>
    </button>
    <button class="footer-btn btn-primary" bindtap="navigate" wx:if="{{guide.location}}">
      <text>ğŸ“ ä¸€é”®å¯¼èˆª</text>
    </button>
  </view>
</view>

<!-- åŠ è½½çŠ¶æ€ -->
<view class="loading-container" wx:if="{{loading}}">
  <text class="loading-text">åŠ è½½ä¸­...</text>
</view>
